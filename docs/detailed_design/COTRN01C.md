# COTRN01C 詳細設計書

## 1. 概要

`COTRN01C` は、特定の取引の全項目（カード番号、金額、取引日時、加盟店情報など）を表示する詳細照会プログラムです。通常、一覧画面 (`COTRN00C`) から遷移して呼び出されます。

## 2. プログラム情報

- **プログラム ID**: `COTRN01C`
- **作成者**: AWS
- **タイプ**: CICS COBOL, VSAM, BMS
- **トランザクション ID**: `CT01`
- **マップセット**: `COTRN01`
- **マップ名**: `COTRN1A`

## 3. 入出力定義

### 3.1. 画面 (BMS)

- **主要フィールド**:
  - `TRNIDINI`: 照会対象の取引 ID。
  - 取引詳細項目表示: `CARDNUM` (カード番号), `TTYPCD` (タイプ), `TCATCD` (カテゴリ), `TRNAMT` (金額), `TORIGDT` (発生日), `TPROCDT` (処理日), 加盟店情報 (`MID`, `MNAME`, `MCITY`, `MZIP`) 等。

### 3.2. VSAM ファイル

- **TRANSACT**: 取引履歴ファイル。 `READ` (照会)用。

## 4. 処理ロジック詳細

### 4.1. 取引データ読込 (`PROCESS-ENTER-KEY`)

1. **入力チェック**: 取引 ID が渡されているか確認。
2. **ファイル照会**: `TRANSACT` ファイルから指定された ID でレコードを `READ`。
3. **データ編集**: レコード内の各フィールド（金額の符号、タイムスタンプなど）を表示形式に整形してマップへ転記。

### 4.2. 画面制御

- **PF3**: 前の画面（メインメニュー等）へ戻る。
- **PF5**: 取引一覧画面 (`COTRN00C`) へ戻る。

## 5. エラーハンドリング

- 指定された取引 ID がファイルに見つからない場合 (`NOTFND`)、「Transaction ID NOT found」を表示。

## 6. 特記事項

- 参照専用プログラムであり、データの更新機能は持たない。
- 取引金額 (`TRAN-AMT`) は符号付き数値として保持されており、表示時に適切にフォーマットされる。
