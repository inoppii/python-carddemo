# p_COADM01C 詳細設計書

## 1. 概要

`p_COADM01C.py` は、管理者ユーザー向けのメインメニュー機能を提供するオンライン処理プログラムです。ユーザー管理機能やトランザクション種別管理機能へのナビゲーションを担当します。

## 2. プログラム情報

- **プログラム ID**: `p_COADM01C.py`
- **言語**: Python 3.10+
- **接続DB**: なし（ナビゲーションのみ）
- **主要モジュール**: `FastAPI` (Router / Redirect ロジック)

## 3. インターフェース定義

### 3.1. API / 画面遷移

- **GET `/admin/menu`**: 管理者メニュー画面の表示。
- **機能リスト**:
  - **ユーザー管理**: `p_COUSR00C` 〜 `p_COUSR03C` へのリンク。
  - **取引種別管理**: `p_COTRTLIC`, `p_COTRTUPC` へのリンク。

## 4. 処理ロジック詳細

1. **認可チェック**: 現在のセッション（JWT 等）を検証し、ユーザータイプが 'A' (Admin) であることを確認。管理者でない場合は 403 Forbidden またはログイン画面へリダイレクト。
2. **メニュー生成**: 表示可能な機能リストを返却。
3. **遷移制御**: クライアントからのリクエストに基づき、各管理機能のエンドポイントへ誘導。

## 5. エラーハンドリング

- **403 Forbidden**: 非管理者によるアクセス。
- **401 Unauthorized**: 未ログイン状態でのアクセス。

---
[オンライン処理編](file:///Users/inohara/Documents/antigravity-demo/python-carddemo/docs/p_BasicDesign_Online.md)
